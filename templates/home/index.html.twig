{% extends 'base.html.twig' %}

{% block title %}Dashboard - PelisValora{% endblock %}

{% block body %}
<style>
    :root {
        --glass: rgba(30, 41, 59, 0.5);
        --glass-border: rgba(255, 255, 255, 0.1);
        --gold: #fbbf24;
        --sky: #38bdf8;
        --rose: #fb7185;
    }

    body {
        background: radial-gradient(circle at top, #1e293b 0%, #0f172a 100%);
        font-family: 'Poppins', sans-serif;
        color: white;
        margin: 0;
        min-height: 100vh;
    }

    .dashboard-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 20px;
    }

    .user-profile-badge {
        align-self: flex-end;
        background: var(--glass);
        backdrop-filter: blur(12px);
        border: 1px solid var(--glass-border);
        padding: 10px 20px;
        border-radius: 100px;
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 40px;
    }

    .user-email { font-weight: 600; font-size: 0.9rem; color: #e2e8f0; }

    .btn-logout {
        background: #ef4444;
        color: white;
        text-decoration: none;
        font-size: 0.7rem;
        font-weight: 800;
        padding: 8px 18px;
        border-radius: 50px;
        text-transform: uppercase;
        transition: 0.3s;
    }
    .btn-logout:hover { filter: brightness(1.2); box-shadow: 0 0 15px rgba(239, 68, 68, 0.4); }

    .auth-buttons { display: flex; gap: 10px; }
    .btn-auth {
        text-decoration: none;
        font-size: 0.75rem;
        font-weight: 800;
        padding: 8px 20px;
        border-radius: 50px;
        text-transform: uppercase;
        transition: 0.3s;
    }
    .btn-login {
        color: white;
        border: 1px solid var(--glass-border);
    }
    .btn-login:hover { background: rgba(255,255,255,0.1); border-color: var(--sky); }

    .btn-register {
        background: var(--sky);
        color: #0f172a;
    }
    .btn-register:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(56, 189, 248, 0.4); }

    .header-section { text-align: center; margin-bottom: 50px; }
    .main-title {
        font-size: 4.5rem;
        font-weight: 950;
        letter-spacing: -2px;
        margin: 0;
        background: linear-gradient(to bottom, #ffffff 40%, #94a3b8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-transform: uppercase;
    }
    .sub-title { color: var(--sky); letter-spacing: 5px; font-weight: 600; font-size: 0.8rem; text-transform: uppercase; margin-top: 10px; }

    .menu-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 25px;
        width: 100%;
        max-width: 1000px;
        margin-top: 20px;
    }

    .menu-card {
        background: var(--glass);
        backdrop-filter: blur(10px);
        border: 2px solid var(--glass-border);
        border-radius: 32px;
        height: 200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .menu-card .emoji { font-size: 3.5rem; margin-bottom: 15px; transition: 0.3s; }
    .menu-card .label { color: white; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem; }

    .menu-card:hover { transform: translateY(-10px); background: rgba(30, 41, 59, 0.8); }
    .card-rankings:hover { border-color: var(--sky); box-shadow: 0 0 40px rgba(56, 189, 248, 0.2); }
    .card-catalogo:hover { border-color: var(--rose); box-shadow: 0 0 40px rgba(251, 113, 133, 0.2); }
    .card-stats:hover { border-color: var(--gold); box-shadow: 0 0 40px rgba(251, 191, 36, 0.2); }
    .card-dashboard:hover { border-color: #818cf8; box-shadow: 0 0 40px rgba(129, 140, 248, 0.2); }

    @media (max-width: 768px) {
        .menu-grid { grid-template-columns: 1fr; }
        .main-title { font-size: 3rem; }
    }
</style>

<div class="dashboard-wrapper">

    {# SECCI√ìN SUPERIOR: USUARIO O LOGIN #}
    <div class="user-profile-badge">
        {% if app.user %}
            <span class="user-email">üë§ {{ app.user.email }}</span>
            <a href="{{ path('app_logout') }}" class="btn-logout">Salir</a>
        {% else %}
            <div class="auth-buttons">
                <a href="{{ path('app_login') }}" class="btn-auth btn-login">Entrar</a>
                <a href="{{ path('app_register') }}" class="btn-auth btn-register">Registrarme</a>
            </div>
        {% endif %}
    </div>

    <div class="header-section">
        <h1 class="main-title">PELISVALORA</h1>
        <div class="sub-title">Tu experiencia del cine</div>
    </div>

    {# MEN√ö DE NAVEGACI√ìN #}
    <div class="menu-grid">
        <a href="{{ path('app_ranking_index') }}" class="menu-card card-rankings">
            <span class="emoji">üèÜ</span>
            <span class="label">Mis Rankings</span>
        </a>

        <a href="{{ path('app_pelicula_catalogo') }}" class="menu-card card-catalogo">
            <span class="emoji">üçø</span>
            <span class="label">Ver Cat√°logo</span>
        </a>

        <a href="{{ path('app_rankings_estadisticas') }}" class="menu-card card-stats">
            <span class="emoji">üìä</span>
            <span class="label">Estad√≠sticas</span>
        </a>

        {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('app_admin_dashboard') }}" class="menu-card card-dashboard">
                <span class="emoji">üõ°Ô∏è</span>
                <span class="label">Panel Admin</span>
            </a>
        {% endif %}
    </div>
</div>
{% endblock %}
